<launch>
  <!-- Dead Reckoning (Laser Scan Matcher) -->
  <node pkg="laser_scan_matcher" type="laser_scan_matcher_node" name="laser_scan_matcher_node">
    <remap from="/scan" to="/car_1/amcl/scan" />
    <remap from="/imu/data" to="/car_1/amcl/imu" />
    <remap from="/pose2D" to="/car_1/amcl/base_link" />
    
    <param name="base_frame" value="car_1/amcl/base_link" />
    <param name="fixed_frame" value="car_1/amcl/odom" />
    <param name="use_odom" value="false" />
    <param name="use_imu" value="true" />
  </node>

  <!-- Particle Filter (AMCL) -->
  <node pkg="amcl" type="amcl" name="amcl">
    <remap from="/scan" to="/car_1/amcl/scan" />
    <remap from="/amcl_pose" to="/car_1/amcl/pose" />
    
    <param name="base_frame_id" value="car_1/amcl/base_link" />
    <param name="odom_frame_id" value="car_1/amcl/odom" />
    <param name="use_map_topic" value="true" />
    <param name="first_map_only" value="true" />
    <param name="tf_broadcast" value="true" />
  </node>

  <!-- Odometry Publisher -->
  <node pkg="tehaseen_racer" type="odometry_publisher.py" name="odometry_publisher">
    <remap from="/car_1/amcl/pose" to="/car_1/amcl/pose" />
    <remap from="/car_1/amcl/odom" to="/car_1/amcl/odom" />
    <param name="odom_frame_id" value="world" />
    <param name="base_frame_id" value="car_1/amcl/base_link" />
  </node>
</launch>